!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>IFE JavaScript Task 01</title>
  </head>
<body>

  <h3>污染城市列表</h3>
  <ul id="aqi-list">
<!--   
    <li>第一名：福州（样例），10</li>
  	<li>第二名：福州（样例），10</li> -->
  </ul>

<script type="text/javascript">

  var aqiData = [
    ["北京", 90],
    ["上海", 50],
    ["福州", 10],
    ["广州", 50],
    ["成都", 90],
    ["西安", 100]
  ];
  var ntoCNnum = [
    "一","二","三","四","五","六","七","八","九","十"
  ];
  function getCities() {

    /*
    在注释下方编写代码
    遍历读取aqiData中各个城市的数据
    将空气质量指数大于60的城市显示到aqi-list的列表中
    */
    var nodele_ul=document.getElementById("aqi-list");
    var g_n=0;
    for (var i=0;i<aqiData.length;i++) {
      if (aqiData[i][1]>60) {
        var nodchild=document.createElement("li");
        n=ntoCNnum[g_n++];
        nodchild.innerHTML=`第${n}名`+aqiData[i][0]+"，"+aqiData[i][1];
        nodele_ul.appendChild(nodchild);
      }  
    }
  }

//  getCities();

function test() {
  //fs: filter first
  var aqiData_fs=aqiData.filter(
      function (p_value,p_index,p_array) {
      //  alert(p_value);
        return p_value[1]>60;

      }
    );
  //fs: sort then
  alert(aqiData_fs);
    alert(aqiData_fs);
  aqiData_fs.sort(
    function (a,b) {
      return b[1]-a[1];
    }    
  );
  //alert(aqiData_fs);
  //append child to ul
  var nodele_ul=document.getElementById("aqi-list");
  var g_n=0;
  for (var i=0;i<aqiData_fs.length;i++) {
    var nodchild=document.createElement("li");
    n=ntoCNnum[g_n++];
    nodchild.innerHTML=`第${n}名`+aqiData_fs[i][0]+"，"+aqiData_fs[i][1];
    nodele_ul.appendChild(nodchild);
     
  }
}
test();


</script>
</body>
</html>